# 生物识别功能使用指南

## 功能概述

本系统集成了摄像头和指纹板功能，用于记录客户的面部照片和指纹信息，提供更安全的身份验证和记录管理。

## 主要功能

### 1. 面部照片采集
- 使用摄像头实时拍摄客户面部照片
- 支持多摄像头设备选择
- 自动保存到客户档案

### 2. 指纹采集
- 支持指纹板设备连接
- 采集指纹模板数据
- 保存指纹图像用于验证

## 使用步骤

### 称重记录中的生物识别

1. **选择客户**
   - 在称重界面选择要记录的客户
   - 只有选择了客户后，生物识别功能才会显示

2. **拍摄面部照片**
   - 点击"📷 拍摄面部照片"按钮
   - 系统会打开摄像头界面
   - 调整摄像头位置，确保客户面部清晰可见
   - 点击"拍照"按钮完成拍摄
   - 照片会自动保存到客户档案

3. **采集指纹**
   - 点击"👆 采集指纹"按钮
   - 系统会初始化指纹板设备
   - 按照提示将手指放在指纹板上
   - 等待指纹采集完成
   - 指纹数据会自动保存

4. **查看采集状态**
   - 系统会显示已采集的生物识别数据
   - 包括面部照片和指纹数据的状态

## 硬件要求

### 摄像头
- USB摄像头或内置摄像头
- 支持WebRTC标准
- 建议分辨率：1280x720或更高

### 指纹板
- 支持USB连接的指纹识别设备
- 兼容Windows/Linux/macOS系统
- 支持指纹模板数据输出

## 数据存储

### 文件存储
- 面部照片：存储在用户数据目录的`biometric_data`文件夹
- 指纹图像：同样存储在`biometric_data`文件夹
- 文件命名格式：`face_[客户ID]_[时间戳].jpg`

### 数据库存储
- 生物识别数据存储在`biometric_data`表中
- 包含文件路径、指纹模板等元数据
- 与客户信息关联

## 隐私和安全

### 数据保护
- 所有生物识别数据都存储在本地
- 不会上传到外部服务器
- 数据加密存储

### 访问控制
- 只有授权用户才能访问生物识别数据
- 需要登录系统才能使用相关功能
- 数据访问有完整的日志记录

## 故障排除

### 摄像头问题
1. **摄像头无法启动**
   - 检查摄像头是否被其他应用占用
   - 确认摄像头权限设置
   - 尝试重新连接摄像头

2. **拍照失败**
   - 检查摄像头连接
   - 确认有足够的存储空间
   - 重启应用程序

### 指纹板问题
1. **指纹板无法初始化**
   - 检查USB连接
   - 确认驱动程序已安装
   - 检查设备兼容性

2. **指纹采集失败**
   - 确保手指清洁干燥
   - 检查指纹板表面清洁
   - 尝试不同的手指

### 常见错误
- **权限错误**：检查摄像头和麦克风权限
- **设备占用**：关闭其他使用摄像头的应用
- **存储空间不足**：清理磁盘空间
- **驱动问题**：更新或重新安装设备驱动

## 技术规格

### 支持的图像格式
- 面部照片：JPEG格式，质量80%
- 指纹图像：JPEG格式，黑白图像

### 数据大小
- 面部照片：通常50-200KB
- 指纹模板：通常1-5KB
- 指纹图像：通常10-50KB

### 性能要求
- 内存：建议4GB以上
- 存储：每个客户约1MB生物识别数据
- 处理器：支持WebRTC的现代处理器

## 最佳实践

### 拍摄建议
- 确保光线充足
- 客户面部正对摄像头
- 避免逆光和阴影
- 保持适当距离

### 指纹采集建议
- 手指完全覆盖传感器
- 保持手指稳定
- 避免手指过于干燥或湿润
- 采集多个手指作为备用

### 数据管理
- 定期备份生物识别数据
- 定期清理无效数据
- 监控存储空间使用情况
- 保持数据完整性

## 技术支持

如果遇到技术问题，请：
1. 检查硬件连接
2. 确认软件版本
3. 查看错误日志
4. 联系技术支持团队

## 法律合规

使用生物识别功能时，请确保：
- 获得客户明确同意
- 遵守当地隐私法规
- 建立数据保护政策
- 定期审查数据使用情况
